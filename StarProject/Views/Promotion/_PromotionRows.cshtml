@using StarProject.DTOs.PromotionDTOs
@model IEnumerable<PromotionListDto>

@{
    var list = Model ?? Enumerable.Empty<PromotionListDto>();
}

@foreach (var item in list)
{
    var status = item.Status ?? string.Empty;
    var statusClass = status == "Active" ? "status-active"
                    : status == "Inactive" ? "status-inactive"
                    : "status-expired";
    <tr>
        <td>@item.No</td>
        <td>@item.Name</td>
        <td>@item.CouponCode</td>
        <td>@item.CategoryDisplay</td>
        <td>@item.StartDate.ToString("yyyy-MM-dd")</td>
        <td>@item.EndDate.ToString("yyyy-MM-dd")</td>
        <td><span class="status-badge @statusClass">@status</span></td>
        <td style="width:170px; text-align:center;">
            <a class="btn btn-color btn-sm" 
               asp-controller="Promotion" asp-action="Edit" asp-route-id="@item.No">編輯</a>

            <!-- ★ 新增：刪除按鈕（不跳系統提示），改用 Modal -->
            <button type="button"
                    class="btn btn-outline-delect btn-sm ms-1 br20px btn-delete"
                    data-id="@item.No"
                    data-name="@item.Name"
                    data-code="@item.CouponCode">
                刪除
            </button>
        </td>
    </tr>
}
